"use strict";(self.webpackChunkinventory_app=self.webpackChunkinventory_app||[]).push([[120],{120:(e,t,o)=>{o.r(t),o.d(t,{default:()=>i});var r=o(43),a=o(416),n=o(276),d=o(580),c=o(579);const i=e=>{let{product:t,onClose:o,onUpdateProduct:i}=e;const{categories:s,updateCategory:u}=(0,d.Us)(),[l,m]=(0,r.useState)({product_id:(null===t||void 0===t?void 0:t.product_id)||"",product_name:(null===t||void 0===t?void 0:t.product_name)||"",unit:(null===t||void 0===t?void 0:t.unit)||"",category:(null===t||void 0===t?void 0:t.category)||"",amount:(null===t||void 0===t?void 0:t.amount)||""}),[_,p]=(0,r.useState)(!1),[y,g]=(0,r.useState)(!1),[h,x]=(0,r.useState)(null),[v,C]=(0,r.useState)(""),[j,F]=(0,r.useState)(!1);(0,r.useEffect)((()=>{t&&m({product_id:t.product_id,product_name:t.product_name,unit:t.unit,category:t.category,amount:t.amount})}),[t]);const P=e=>{const{name:t,value:o}=e.target;m({...l,[t]:o})};return(0,c.jsxs)("form",{className:a.A.form,onSubmit:async e=>{e.preventDefault(),p(!0);try{await i(l)&&o()}catch(t){console.error("Error updating product:",t)}finally{p(!1)}},children:[(0,c.jsx)("h2",{className:a.A.heading,children:"Product Manager"}),(0,c.jsxs)("label",{children:["Product ID:",(0,c.jsx)("input",{type:"text",name:"product_id",value:l.product_id,readOnly:!0,disabled:!0})]}),(0,c.jsxs)("label",{children:["Product Name:",(0,c.jsx)("input",{type:"text",name:"product_name",value:l.product_name,onChange:P,required:!0})]}),(0,c.jsxs)("label",{children:["Unit:",(0,c.jsx)("input",{type:"text",name:"unit",value:l.unit,onChange:P,required:!0})]}),(0,c.jsxs)("div",{className:a.A.categoryContainer,children:[(0,c.jsxs)("label",{children:["Category:",(0,c.jsxs)("select",{name:"category",value:l.category,onChange:P,required:!0,children:[(0,c.jsx)("option",{value:"",children:"Select a category"}),s.map(((e,t)=>(0,c.jsx)("option",{value:"object"===typeof e?e.id:e,children:"object"===typeof e?e.name:e},t)))]})]}),(0,c.jsx)(n.A,{type:"button",variant:"primary",onClick:()=>g(!y),children:y?"Hide Category Editor":"Edit Categories"})]}),y&&(0,c.jsxs)("div",{className:a.A.categoryEditSection,children:[(0,c.jsx)("h3",{children:"Edit Category Names"}),(0,c.jsx)("p",{className:a.A.helpText,children:"Select a category to rename it. This will update the category for all products."}),(0,c.jsx)("div",{className:a.A.categoryList,children:s.map(((e,t)=>(0,c.jsxs)("div",{className:a.A.categoryItem,children:[(0,c.jsx)("span",{className:a.A.categoryName,children:"object"===typeof e?e.name:e}),(0,c.jsx)(n.A,{type:"button",variant:"edit",onClick:()=>(e=>{"object"===typeof e&&null!==e&&(x(e),C(e.name),g(!0))})(e),children:"Edit"})]},t)))}),h&&(0,c.jsxs)("div",{className:a.A.categoryEditForm,children:[(0,c.jsxs)("h4",{children:['Rename "',h.name,'"']}),(0,c.jsxs)("div",{className:a.A.editCategoryInput,children:[(0,c.jsx)("input",{type:"text",value:v,onChange:e=>C(e.target.value),placeholder:"New category name",required:!0}),(0,c.jsxs)("div",{className:a.A.categoryEditButtons,children:[(0,c.jsx)(n.A,{type:"button",variant:"success",onClick:async()=>{if(h&&v.trim()){F(!0);try{await u(h.id,v),g(!1),x(null),C("")}catch(e){console.error("Error updating category:",e)}finally{F(!1)}}},disabled:j,icon:"fas fa-save",children:j?"Updating...":"Update"}),(0,c.jsx)(n.A,{type:"button",variant:"secondary",onClick:()=>{x(null),C("")},disabled:j,icon:"fas fa-times",children:"Cancel"})]})]}),(0,c.jsx)("p",{className:a.A.warningText,children:"Warning: This will update all products that use this category."})]})]}),(0,c.jsxs)("label",{children:["Amount:",(0,c.jsx)("input",{type:"number",name:"amount",value:l.amount,onChange:P,required:!0})]}),(0,c.jsxs)("div",{className:a.A.buttonGroup,children:[(0,c.jsx)(n.A,{type:"submit",variant:"success",disabled:_,icon:"fas fa-save",children:_?"Saving...":"Save"}),(0,c.jsx)(n.A,{type:"button",onClick:o,variant:"secondary",disabled:_,icon:"fas fa-times",children:"Cancel"})]})]})}},416:(e,t,o)=>{o.d(t,{A:()=>r});const r={form:"ProductForm_form__2eyCa",heading:"ProductForm_heading__NA0ph",generatedField:"ProductForm_generatedField__9VTzt",fieldNote:"ProductForm_fieldNote__1MS8-",newCategoryInput:"ProductForm_newCategoryInput__lIdil",deleteCategoryInput:"ProductForm_deleteCategoryInput__IIZiA",categorySection:"ProductForm_categorySection__yH2V+",buttonGroup:"ProductForm_buttonGroup__Q+LmU",customDropdown:"ProductForm_customDropdown__nFLPj",selectedCategory:"ProductForm_selectedCategory__LPaC+",dropdownMenu:"ProductForm_dropdownMenu__VpjEr",dropdownItem:"ProductForm_dropdownItem__VkJb6",categoryName:"ProductForm_categoryName__ohrn8",deleteButton:"ProductForm_deleteButton__L7lFs",addNewCategory:"ProductForm_addNewCategory__7EpW5",addCategoryButton:"ProductForm_addCategoryButton__yE3NN",noCategories:"ProductForm_noCategories__D7dwo",categoryContainer:"ProductForm_categoryContainer__pTazC",categoryEditSection:"ProductForm_categoryEditSection__Rpx2O",helpText:"ProductForm_helpText__fBG5t",warningText:"ProductForm_warningText__P8DAq",categoryList:"ProductForm_categoryList__T7+n8",categoryItem:"ProductForm_categoryItem__7x0wS",categoryEditForm:"ProductForm_categoryEditForm__Wkt+4",editCategoryInput:"ProductForm_editCategoryInput__Vm+En",categoryEditButtons:"ProductForm_categoryEditButtons__+cDWB"}}}]);
//# sourceMappingURL=120.6b19eff8.chunk.js.map