"use strict";(self.webpackChunkinventory_app=self.webpackChunkinventory_app||[]).push([[120,265,511],{120:(e,t,o)=>{o.r(t),o.d(t,{default:()=>c});var r=o(43),a=o(416),n=o(276),s=o(580),l=o(579);const c=e=>{let{product:t,onClose:o,onUpdateProduct:c}=e;const{categories:d,updateCategory:i}=(0,s.Us)(),[u,p]=(0,r.useState)({product_id:(null===t||void 0===t?void 0:t.product_id)||"",product_name:(null===t||void 0===t?void 0:t.product_name)||"",unit:(null===t||void 0===t?void 0:t.unit)||"",category:(null===t||void 0===t?void 0:t.category)||"",amount:(null===t||void 0===t?void 0:t.amount)||""}),[m,g]=(0,r.useState)(!1),[h,x]=(0,r.useState)(!1),[y,_]=(0,r.useState)(null),[j,f]=(0,r.useState)(""),[b,v]=(0,r.useState)(!1);(0,r.useEffect)((()=>{t&&p({product_id:t.product_id,product_name:t.product_name,unit:t.unit,category:t.category,amount:t.amount})}),[t]);const C=e=>{const{name:t,value:o}=e.target;p({...u,[t]:o})};return(0,l.jsxs)("form",{className:a.A.form,onSubmit:async e=>{e.preventDefault(),g(!0);try{await c(u)&&o()}catch(t){console.error("Error updating product:",t)}finally{g(!1)}},children:[(0,l.jsx)("h2",{className:a.A.heading,children:"Product Manager"}),(0,l.jsxs)("label",{children:["Product ID:",(0,l.jsx)("input",{type:"text",name:"product_id",value:u.product_id,readOnly:!0,disabled:!0})]}),(0,l.jsxs)("label",{children:["Product Name:",(0,l.jsx)("input",{type:"text",name:"product_name",value:u.product_name,onChange:C,required:!0})]}),(0,l.jsxs)("label",{children:["Unit:",(0,l.jsx)("input",{type:"text",name:"unit",value:u.unit,onChange:C,required:!0})]}),(0,l.jsxs)("div",{className:a.A.categoryContainer,children:[(0,l.jsxs)("label",{children:["Category:",(0,l.jsxs)("select",{name:"category",value:u.category,onChange:C,required:!0,children:[(0,l.jsx)("option",{value:"",children:"Select a category"}),d.map(((e,t)=>(0,l.jsx)("option",{value:"object"===typeof e?e.id:e,children:"object"===typeof e?e.name:e},t)))]})]}),(0,l.jsx)(n.A,{type:"button",variant:"primary",onClick:()=>x(!h),children:h?"Hide Category Editor":"Edit Categories"})]}),h&&(0,l.jsxs)("div",{className:a.A.categoryEditSection,children:[(0,l.jsx)("h3",{children:"Edit Category Names"}),(0,l.jsx)("p",{className:a.A.helpText,children:"Select a category to rename it. This will update the category for all products."}),(0,l.jsx)("div",{className:a.A.categoryList,children:d.map(((e,t)=>(0,l.jsxs)("div",{className:a.A.categoryItem,children:[(0,l.jsx)("span",{className:a.A.categoryName,children:"object"===typeof e?e.name:e}),(0,l.jsx)(n.A,{type:"button",variant:"edit",onClick:()=>(e=>{"object"===typeof e&&null!==e&&(_(e),f(e.name),x(!0))})(e),children:"Edit"})]},t)))}),y&&(0,l.jsxs)("div",{className:a.A.categoryEditForm,children:[(0,l.jsxs)("h4",{children:['Rename "',y.name,'"']}),(0,l.jsxs)("div",{className:a.A.editCategoryInput,children:[(0,l.jsx)("input",{type:"text",value:j,onChange:e=>f(e.target.value),placeholder:"New category name",required:!0}),(0,l.jsxs)("div",{className:a.A.categoryEditButtons,children:[(0,l.jsx)(n.A,{type:"button",variant:"success",onClick:async()=>{if(y&&j.trim()){v(!0);try{await i(y.id,j),x(!1),_(null),f("")}catch(e){console.error("Error updating category:",e)}finally{v(!1)}}},disabled:b,icon:"fas fa-save",children:b?"Updating...":"Update"}),(0,l.jsx)(n.A,{type:"button",variant:"secondary",onClick:()=>{_(null),f("")},disabled:b,icon:"fas fa-times",children:"Cancel"})]})]}),(0,l.jsx)("p",{className:a.A.warningText,children:"Warning: This will update all products that use this category."})]})]}),(0,l.jsxs)("label",{children:["Amount:",(0,l.jsx)("input",{type:"number",name:"amount",value:u.amount,onChange:C,required:!0})]}),(0,l.jsxs)("div",{className:a.A.buttonGroup,children:[(0,l.jsx)(n.A,{type:"submit",variant:"success",disabled:m,icon:"fas fa-save",children:m?"Saving...":"Save"}),(0,l.jsx)(n.A,{type:"button",onClick:o,variant:"secondary",disabled:m,icon:"fas fa-times",children:"Cancel"})]})]})}},265:(e,t,o)=>{o.r(t),o.d(t,{default:()=>d});var r=o(43),a=o(416),n=o(276),s=o(580),l=o(529);var c=o(579);const d=e=>{let{onClose:t}=e;const{addProduct:o,addCategory:d,deleteCategory:i,categories:u,products:p}=(0,s.Us)(),[m,g]=(0,r.useState)(""),[h,x]=(0,r.useState)({product_id:null,product_name:"",unit:"",category:"",amount:""}),[y,_]=(0,r.useState)(null),[j,f]=(0,r.useState)(!1),b=(0,r.useRef)(null);(0,r.useEffect)((()=>{if(p&&p.length>=0){const e=(e=>e&&0!==e.length?Math.max(...e.map((e=>"string"===typeof e.product_id?parseInt(e.product_id,10):e.product_id)))+1:1)(p);x((t=>({...t,product_id:e})))}}),[p]),(0,r.useEffect)((()=>{b.current&&b.current.focus()}),[]);const v=e=>{const{name:t,value:o}=e.target;if(console.log(`Form field ${t} changed to: ${o} (type: ${typeof o})`),"category"===t){console.log("Category selected:",o);const e=isNaN(o)?o:parseInt(o,10);console.log("Normalized category value:",e,"(type:",typeof e,")"),x({...h,[t]:e})}else x({...h,[t]:o})};return(0,c.jsxs)("form",{className:a.A.form,onSubmit:async e=>{e.preventDefault(),f(!0);try{if(!h.product_id||!h.product_name||!h.unit||!h.category||""===h.amount)return(0,l.Qg)("All fields are required"),void f(!1);const e={...h,product_id:parseInt(h.product_id,10)};await o(e)&&t()}catch(r){console.error("Error submitting form:",r),(0,l.Qg)(r.message||"Failed to add product")}finally{f(!1)}},children:[(0,c.jsx)("h2",{className:a.A.heading,children:"Product Manager"}),(0,c.jsxs)("label",{children:["Product ID:",(0,c.jsx)("input",{type:"text",name:"product_id",value:h.product_id?`#${C=h.product_id,C.toString().padStart(4,"0")}`:"",readOnly:!0,className:a.A.generatedField}),(0,c.jsx)("small",{className:a.A.fieldNote,children:"Auto-generated sequential ID"})]}),(0,c.jsxs)("label",{children:["Product Name:",(0,c.jsx)("input",{type:"text",name:"product_name",value:h.product_name,onChange:v,ref:b,required:!0})]}),(0,c.jsxs)("label",{children:["Unit:",(0,c.jsx)("input",{type:"text",name:"unit",value:h.unit,onChange:v,required:!0})]}),(0,c.jsxs)("label",{children:["Category:",(0,c.jsxs)("select",{name:"category",value:h.category,onChange:v,required:!0,children:[(0,c.jsx)("option",{value:"",children:"Select a category"}),u.map(((e,t)=>(0,c.jsx)("option",{value:"object"===typeof e?e.id:e,children:"object"===typeof e?e.name:e},t)))]})]}),(0,c.jsxs)("div",{className:a.A.categorySection,children:[(0,c.jsxs)("div",{className:a.A.newCategoryInput,children:[(0,c.jsx)("input",{type:"text",placeholder:"New category name",value:m,onChange:e=>g(e.target.value)}),(0,c.jsx)(n.A,{type:"button",onClick:async()=>{if(m.trim())if(u.includes(m.trim()))(0,l.Qg)("Category already exists");else try{await d(m),g("")}catch(e){console.error("Error adding category:",e),(0,l.Qg)(e.message||"Failed to add category")}else(0,l.Qg)("Category name cannot be empty")},variant:"success",icon:"fas fa-plus",children:"Add Category"})]}),(0,c.jsxs)("div",{className:a.A.deleteCategoryInput,children:[(0,c.jsxs)("select",{value:y||"",onChange:e=>_(e.target.value),children:[(0,c.jsx)("option",{value:"",children:"Select a category to delete"}),u.map(((e,t)=>(0,c.jsx)("option",{value:"object"===typeof e?e.id:e,children:"object"===typeof e?e.name:e},t)))]}),(0,c.jsx)(n.A,{type:"button",onClick:async()=>{if(y)try{await i(y),_(null),h.category===y&&x({...h,category:""})}catch(e){console.error("Error deleting category:",e),(0,l.Qg)(e.message||"Failed to delete category")}else(0,l.Qg)("Please select a category to delete")},variant:"delete",icon:"fas fa-trash-alt",children:"Delete Category"})]})]}),(0,c.jsxs)("label",{children:["Amount:",(0,c.jsx)("input",{type:"number",name:"amount",value:h.amount,onChange:v,required:!0})]}),(0,c.jsxs)("div",{className:a.A.buttonGroup,children:[(0,c.jsx)(n.A,{type:"submit",variant:"success",icon:"fas fa-save",disabled:j,children:j?"Adding...":"Add Product"}),(0,c.jsx)(n.A,{type:"button",onClick:t,variant:"secondary",disabled:j,icon:"fas fa-times",children:"Cancel"})]})]});var C}},416:(e,t,o)=>{o.d(t,{A:()=>r});const r={form:"ProductForm_form__2eyCa",heading:"ProductForm_heading__NA0ph",generatedField:"ProductForm_generatedField__9VTzt",fieldNote:"ProductForm_fieldNote__1MS8-",newCategoryInput:"ProductForm_newCategoryInput__lIdil",deleteCategoryInput:"ProductForm_deleteCategoryInput__IIZiA",categorySection:"ProductForm_categorySection__yH2V+",buttonGroup:"ProductForm_buttonGroup__Q+LmU",customDropdown:"ProductForm_customDropdown__nFLPj",selectedCategory:"ProductForm_selectedCategory__LPaC+",dropdownMenu:"ProductForm_dropdownMenu__VpjEr",dropdownItem:"ProductForm_dropdownItem__VkJb6",categoryName:"ProductForm_categoryName__ohrn8",deleteButton:"ProductForm_deleteButton__L7lFs",addNewCategory:"ProductForm_addNewCategory__7EpW5",addCategoryButton:"ProductForm_addCategoryButton__yE3NN",noCategories:"ProductForm_noCategories__D7dwo",categoryContainer:"ProductForm_categoryContainer__pTazC",categoryEditSection:"ProductForm_categoryEditSection__Rpx2O",helpText:"ProductForm_helpText__fBG5t",warningText:"ProductForm_warningText__P8DAq",categoryList:"ProductForm_categoryList__T7+n8",categoryItem:"ProductForm_categoryItem__7x0wS",categoryEditForm:"ProductForm_categoryEditForm__Wkt+4",editCategoryInput:"ProductForm_editCategoryInput__Vm+En",categoryEditButtons:"ProductForm_categoryEditButtons__+cDWB"}},511:(e,t,o)=>{o.r(t),o.d(t,{default:()=>V});var r=o(43),a=o(580),n=o(762);o(557);const s=(e,t)=>{if(!Array.isArray(e))return void console.error("Expected an array of products");const o=new n.jsPDF;o.setFont("Arial"),o.text("Order Requirements",14,16);const r=e.map((e=>{const o=t.find((t=>t.product_id===e.product_id&&"#00ff00"===t.color)),r=o?o.amount-e.amount:0;return{product_id:e.product_id,product_name:e.product_name,current_amount:e.amount,amount_needed:r>0?r:0,unit:e.unit,category:e.category}}));o.autoTable({startY:20,head:[["Product ID","Name","Current Amount","Amount Needed","Unit","Category"]],body:r.map((e=>[e.product_id,e.product_name,e.current_amount,e.amount_needed,e.unit,e.category])),theme:"striped",headStyles:{fillColor:[22,160,133]},styles:{cellPadding:2,fontSize:10}}),o.save("order_requirements.pdf")},l="ProductTableControls_filterWrapper__CVLGy",c="ProductTableControls_inventoryCount__iJMYC",d="ProductTableControls_paginationControl__X433l",i="ProductTableControls_itemsPerPageSelect__MNHy-",u="ProductTableControls_controlsRightContainer__TeOeB",p="ProductTableControls_exportModalContent__D5P6r";var m=o(290);const g="CategorySelect_headerDropdown__qvlXj",h="CategorySelect_filterSelect__iaUra";var x=o(579);const y=e=>{let{products:t,selectedFilterOptions:o,setSelectedFilterOptions:n}=e;const[s,l]=(0,r.useState)([]),{categories:c}=(0,a.Us)();(0,r.useEffect)((()=>{if(console.log("Products for categories:",t),console.log("Available categories from context:",c),console.log("Current selected filter options:",o),c&&c.length>0){const e=[{value:"all",label:"All Categories",isFixed:!0},...c.map((e=>"object"===typeof e&&null!==e?(console.log("Category object:",e),{value:e.id.toString(),label:e.name}):(console.log("Category string:",e),{value:e,label:e})))];console.log("Updated options array:",e),l(e)}}),[c,o,t]);return(0,x.jsxs)("div",{className:g,children:[(0,x.jsx)(m.Ay,{isMulti:!0,name:"categories",options:s,className:h,classNamePrefix:"select",value:o,onChange:e=>{if(console.log("Selected options:",e),e&&0!==e.length)if(e&&e.some((e=>"all"===e.value))&&e.length>1){const e=s.find((e=>"all"===e.value));n([e])}else if(e&&e.length>1&&e.some((e=>"all"===e.value))){const t=e.filter((e=>"all"!==e.value));n(t)}else n(e);else n([])},placeholder:"Select categories...",styles:{control:e=>({...e,minHeight:"38px",border:"1px solid #ddd",boxShadow:"none","&:hover":{borderColor:"var(--primary)"}}),menu:e=>({...e,zIndex:9999,marginTop:"4px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",position:"absolute",width:"100%"}),menuList:e=>({...e,padding:"6px",maxHeight:"300px"}),option:(e,t)=>({...e,backgroundColor:t.isSelected?"var(--primary)":t.isFocused?"rgba(106, 17, 203, 0.1)":"white",color:t.isSelected?"white":"#333",cursor:"pointer",borderRadius:"4px",marginBottom:"2px",padding:"8px 12px","&:hover":{backgroundColor:t.isSelected?"var(--primary)":"rgba(106, 17, 203, 0.1)"},display:"block"}),multiValue:e=>({...e,backgroundColor:"rgba(106, 17, 203, 0.1)",borderRadius:"4px"}),multiValueLabel:e=>({...e,color:"#333",fontWeight:"500",padding:"3px 6px"}),multiValueRemove:e=>({...e,color:"#666",":hover":{backgroundColor:"rgba(106, 17, 203, 0.2)",color:"#333"}})},isClearable:!0,closeMenuOnSelect:!1,hideSelectedOptions:!1,controlShouldRenderValue:!0,blurInputOnSelect:!1,menuPortalTarget:document.body,menuPosition:"fixed",menuPlacement:"auto",isSearchable:!0,backspaceRemovesValue:!1,autoFocus:!1}),(0,x.jsxs)("div",{style:{display:"none"},children:["Debug: ",s.length," total options available"]})]})};var _=o(176),j=o(619);const f=e=>{let{onAddProductClick:t,onToggleRuleList:o,onExportToPDF:n,itemsPerPage:m,onItemsPerPageChange:g,products:h,rules:f}=e;const[b,v]=(0,r.useState)(!1),{selectedFilterOptions:C,setSelectedFilterOptions:P,filteredProducts:N}=(0,a.Us)(),[A,S]=(0,r.useState)(!1),[F,w]=(0,r.useState)(!1);console.log("Products available in ProductTableControls:",h),console.log("Filtered products count:",N.length);return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("div",{className:"controls",children:[(0,x.jsxs)("div",{className:"controls-left",children:[(0,x.jsxs)("button",{className:"button primary",onClick:t,children:[(0,x.jsx)(j.In,{className:"fas fa-plus"})," Add Product"]}),(0,x.jsxs)("button",{className:"button secondary",onClick:o,children:[(0,x.jsx)(j.In,{className:"fas fa-list"})," Rules"]}),(0,x.jsxs)("div",{className:"actions-dropdown",children:[(0,x.jsxs)("button",{className:"button secondary",onClick:()=>{v(!b)},children:[(0,x.jsx)(j.In,{className:"fas fa-file-export"})," Export ",(0,x.jsx)(j.In,{className:"fas fa-caret-down"})]}),b&&(0,x.jsxs)("div",{className:"dropdown-content",children:[(0,x.jsxs)("button",{onClick:()=>{S(!0),v(!1)},children:[(0,x.jsx)(j.In,{className:"fas fa-file-pdf"}),"Export to PDF"]}),(0,x.jsxs)("button",{onClick:()=>{w(!0),v(!1)},children:[(0,x.jsx)(j.In,{className:"fas fa-shopping-cart"}),"Export Order Requirements"]})]})]})]}),(0,x.jsx)("div",{className:"controls-center",children:(0,x.jsxs)("div",{className:c,children:[(0,x.jsx)(j.In,{className:"fas fa-cubes"}),"Items in inventory: ",N.length]})}),(0,x.jsx)("div",{className:"controls-right",children:(0,x.jsxs)("div",{className:u,children:[(0,x.jsxs)("div",{className:l,children:[(0,x.jsx)(j.In,{className:"fas fa-filter"}),(0,x.jsx)(y,{products:h,selectedFilterOptions:C,setSelectedFilterOptions:P})]}),(0,x.jsxs)("div",{className:d,children:[(0,x.jsx)("span",{children:"Per page:"}),(0,x.jsxs)("select",{id:"itemsPerPage",value:m,onChange:g,className:i,children:[(0,x.jsx)("option",{value:5,children:"5"}),(0,x.jsx)("option",{value:10,children:"10"}),(0,x.jsx)("option",{value:20,children:"20"}),(0,x.jsx)("option",{value:50,children:"50"})]})]})]})})]}),A&&(0,x.jsx)(_.A,{title:"Export to PDF",onClose:()=>S(!1),children:(0,x.jsxs)("div",{className:p,children:[(0,x.jsxs)("p",{children:["You are about to export ",(0,x.jsx)("strong",{children:N.length})," products to PDF.",C&&C.length>0&&"all"!==C[0].value&&(0,x.jsx)("span",{children:" These are filtered by your current category selection."})]}),(0,x.jsx)("p",{children:"The PDF will include the following information for each product:"}),(0,x.jsxs)("ul",{children:[(0,x.jsx)("li",{children:"Product ID"}),(0,x.jsx)("li",{children:"Name"}),(0,x.jsx)("li",{children:"Amount"}),(0,x.jsx)("li",{children:"Unit"}),(0,x.jsx)("li",{children:"Category"})]}),(0,x.jsx)("p",{children:"Are you sure you want to export these products to PDF?"}),(0,x.jsxs)("div",{className:"buttonGroup",children:[(0,x.jsxs)("button",{className:"button success",onClick:()=>{n(),S(!1)},children:[(0,x.jsx)(j.In,{className:"fas fa-check"})," Yes, Export to PDF"]}),(0,x.jsxs)("button",{className:"button secondary",onClick:()=>S(!1),children:[(0,x.jsx)(j.In,{className:"fas fa-times"})," Cancel"]})]})]})}),F&&(0,x.jsx)(_.A,{title:"Export Order Requirements",onClose:()=>w(!1),children:(0,x.jsxs)("div",{className:p,children:[(0,x.jsxs)("p",{children:["You are about to export order requirements for ",(0,x.jsx)("strong",{children:N.length})," products.",C&&C.length>0&&"all"!==C[0].value&&(0,x.jsx)("span",{children:" These are filtered by your current category selection."})]}),(0,x.jsx)("p",{children:"The PDF will include:"}),(0,x.jsxs)("ul",{children:[(0,x.jsx)("li",{children:"Product ID"}),(0,x.jsx)("li",{children:"Name"}),(0,x.jsx)("li",{children:"Current Amount"}),(0,x.jsx)("li",{children:"Amount Needed (based on your green rules)"}),(0,x.jsx)("li",{children:"Unit"}),(0,x.jsx)("li",{children:"Category"})]}),(0,x.jsxs)("p",{children:[(0,x.jsx)("strong",{children:"Note:"}),' "Amount Needed" is calculated based on green rules (#00ff00) that specify target inventory levels.']}),(0,x.jsx)("p",{children:"Are you sure you want to export the order requirements?"}),(0,x.jsxs)("div",{className:"buttonGroup",children:[(0,x.jsxs)("button",{className:"button success",onClick:()=>{s(N,f),w(!1)},children:[(0,x.jsx)(j.In,{className:"fas fa-check"})," Yes, Export Order Requirements"]}),(0,x.jsxs)("button",{className:"button secondary",onClick:()=>w(!1),children:[(0,x.jsx)(j.In,{className:"fas fa-times"})," Cancel"]})]})]})})]})},b="ProductTableRow_centeredCell__IcCZb",v="ProductTableRow_amountCell__tmaAk",C="ProductTableRow_lowStock__0zI-k",P="ProductTableRow_lowStockRow__3SfJY",N="ProductTableRow_actionsCell__6Q4q+",A="ProductTableRow_buttonContainer__cdE5F",S="ProductTableRow_iconButton__oYcEz",F="ProductTableRow_editButton__XPI8J",w="ProductTableRow_ruleButton__GMnTb",I="ProductTableRow_deleteButton__TSxay";var T=o(666);const k=e=>{let{product:t,onEditProduct:o,onDeleteProduct:r,openRuleModal:n,rules:s}=e;const{categories:l}=(0,a.Us)(),c=t.amount<=0,d=((e,t)=>{if(!t)return"transparent";const o=t.filter((t=>t.product_id===e.product_id)).sort(((e,t)=>e.amount-t.amount));for(const r of o){const{comparison:t,amount:o,color:a}=r;switch(t){case"=":if(e.amount===o)return a;break;case"<":if(e.amount<o)return a;break;case">":if(e.amount>o)return a;break;case"<=":if(e.amount<=o)return a;break;case">=":if(e.amount>=o)return a}}return"transparent"})(t,s),i={backgroundColor:d};return(0,x.jsxs)("tr",{className:c?P:"",children:[(0,x.jsx)("td",{className:b,style:i,children:t.product_id}),(0,x.jsx)("td",{style:i,children:t.product_name}),(0,x.jsx)("td",{style:i,children:(e=>{if(null===e||void 0===e)return"";if(console.log("Looking up category display for:",e,"type:",typeof e),console.log("Available categories:",l),isNaN(e))return e;const t=parseInt(e,10);console.log("Converted category ID:",t);const o=l.find((e=>{const o="string"===typeof e.id?parseInt(e.id,10):e.id;return console.log("Comparing category:",e,"with ID:",o,"against:",t),o===t}));return o?(console.log("Found category:",o.name),o.name):(console.log("Category not found, returning original value:",e),e)})(t.category)}),(0,x.jsx)("td",{className:`${v} ${c?C:""}`,style:i,children:t.amount}),(0,x.jsx)("td",{style:i,children:t.unit}),(0,x.jsx)("td",{className:N,children:(0,x.jsxs)("div",{className:A,children:[(0,x.jsxs)("button",{onClick:()=>o(t),className:`${S} ${F}`,title:"Edit Product",children:[(0,x.jsx)(T.A,{className:"fas fa-edit"}),(0,x.jsx)("span",{children:"Edit"})]}),(0,x.jsxs)("button",{onClick:()=>n(null,t),className:`${S} ${w}`,title:"Add Rule",children:[(0,x.jsx)(T.A,{className:"fas fa-plus-circle"}),(0,x.jsx)("span",{children:"Add Rule"})]}),(0,x.jsx)("button",{onClick:()=>r(t.product_id),className:`${S} ${I}`,title:"Delete Product",children:(0,x.jsx)(T.A,{className:"fas fa-trash-alt"})})]})})]})},D="ProductModal_productModal__zf56k",E="ProductModal_productModalContent__6eRxk",R=e=>{let{title:t,children:o,onClose:r,isOpen:a=!0}=e;return(0,x.jsx)(_.A,{isOpen:a,title:t,onClose:r,className:D,children:(0,x.jsx)("div",{className:E,children:o})})};var O=o(265),U=o(120),q=o(607);const B="ProductTable_productTableContainer__B2N24",M="ProductTable_productTable__+k0nE";var L=o(529),$=o(293);const Q=function(){let e=arguments.length>1?arguments[1]:void 0,t=arguments.length>3?arguments[3]:void 0;const[o,a]=(0,r.useState)(!1),[n,s]=(0,r.useState)(!1),[l,c]=(0,r.useState)(null);return{handleEditProduct:async o=>{try{a(!0);const r=JSON.parse(localStorage.getItem("products")||"[]").map((e=>e.product_id===o.product_id?o:e));localStorage.setItem("products",JSON.stringify(r)),e(r),t(null),(0,L.Te)("Product updated successfully")}catch(r){console.error("Error updating product:",r),(0,L.Qg)("Failed to update product")}finally{a(!1)}},handleDeleteProduct:e=>{c(e),s(!0)},handleDeleteProductConfirmed:async()=>{if(l)try{a(!0),console.log(`Confirming deletion of product: ${l}`);const t=await $.jU.deleteProduct(l);if(console.log("Delete API response:",t),200===t.status){console.log(`Product ${l} deleted from database successfully`);const t=JSON.parse(localStorage.getItem("products")||"[]").filter((e=>e.product_id!==l));localStorage.setItem("products",JSON.stringify(t)),e(t),(0,L.Te)("Product deleted successfully")}else console.error("Unexpected response status:",t.status),(0,L.Qg)("Failed to delete product: Unexpected response")}catch(r){var t,o;console.error("Error deleting product:",r),(0,L.Qg)((null===(t=r.response)||void 0===t||null===(o=t.data)||void 0===o?void 0:o.error)||r.message||"Failed to delete product")}finally{a(!1),c(null),s(!1)}},cancelDeleteProduct:()=>{c(null),s(!1)},showDeleteConfirmation:n,productToDelete:l,isLoading:o}},V=e=>{let{onToggleRuleList:t,showRuleList:o,openRuleModal:s}=e;const{filteredProducts:l,rules:c,setFilteredProducts:d,setCategories:i}=(0,a.Us)(),[u,p]=(0,r.useState)(!1),[m,g]=(0,r.useState)(!1),[h,y]=(0,r.useState)(null),{handleEditProduct:_,handleDeleteProduct:j,handleDeleteProductConfirmed:b,cancelDeleteProduct:v,showDeleteConfirmation:C,productToDelete:P}=Q(null,d,i,y);return(0,x.jsxs)("div",{className:B,children:[(0,x.jsx)(f,{onExportToPDF:()=>(e=>{const t=new n.jsPDF;t.setFont("Arial"),t.text("Product Table",14,16),t.autoTable({startY:20,head:[["Product ID","Name","Amount","Unit","Category"]],body:e.map((e=>[e.product_id,e.product_name,e.amount,e.unit,e.category])),theme:"striped",headStyles:{fillColor:[22,160,133]},styles:{cellPadding:2,fontSize:10}}),t.save("products.pdf")})(l),onAddProductClick:()=>p(!0),onToggleRuleList:t,showRuleList:o,products:l,rules:c}),(0,x.jsxs)("table",{className:M,children:[(0,x.jsx)("thead",{children:(0,x.jsxs)("tr",{children:[(0,x.jsx)("th",{children:"Product ID"}),(0,x.jsx)("th",{children:"Name"}),(0,x.jsx)("th",{children:"Category"}),(0,x.jsx)("th",{children:"Amount"}),(0,x.jsx)("th",{children:"Unit"}),(0,x.jsx)("th",{children:"Actions"})]})}),(0,x.jsx)("tbody",{children:Array.isArray(l)&&l.map((e=>(0,x.jsx)(k,{product:e,rules:c,onEditProduct:()=>(e=>{y(e),g(!0)})(e),onDeleteProduct:j,openRuleModal:()=>s(null,e)},e.product_id)))})]}),u&&(0,x.jsx)(R,{title:"Add New Product",onClose:()=>p(!1),children:(0,x.jsx)(O.default,{onClose:()=>p(!1)})}),m&&(0,x.jsx)(R,{title:"Edit Product",onClose:()=>g(!1),children:(0,x.jsx)(U.default,{product:h,onClose:()=>g(!1),onUpdateProduct:_})}),C&&(0,x.jsx)(q.A,{title:"Delete Product",message:`Are you sure you want to delete "${(()=>{if(!P)return"";const e=l.find((e=>e.product_id===P));return e?e.product_name:""})()}"? This action cannot be undone and will remove the product and its data from your inventory.`,onConfirm:b,onCancel:v,confirmButtonText:"Delete Product",cancelButtonText:"Cancel",confirmButtonVariant:"danger"})]})}}}]);
//# sourceMappingURL=511.f9a959fc.chunk.js.map